/*!
* Bootstrap.js by @fat & @mdo
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){"use strict",a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(a){return a||(this.paused=!0),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j=a.Event("slide");this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h]();if(e.hasClass("active"))return;if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c);e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):typeof c=="string"||(c=f.slide)?e[c]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();a(e).collapse(f)})})}(window.jQuery),!function(a){function d(){a(b).parent().removeClass("open")}"use strict";var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e,f,g;if(c.is(".disabled, :disabled"))return;return f=c.attr("data-target"),f||(f=c.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),e=a(f),e.length||(e=c.parent()),g=e.hasClass("open"),d(),g||e.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery),!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;a("body").addClass("modal-open"),this.isShown=!0,g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();var e=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},isHTML:function(a){return typeof a!="string"||a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(a)},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.isHTML(b)?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.isHTML(b)?"html":"text"](b),a.find(".popover-content > *")[this.isHTML(c)?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&c.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu")&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c=this,d,e;return this.query=this.$element.val(),this.query?(d=a.grep(this.source,function(a){return c.matcher(a)}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keypress,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},keypress:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.type!="keydown")break;a.preventDefault(),this.prev();break;case 40:if(a.type!="keydown")break;a.preventDefault(),this.next()}a.stopPropagation()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery);

//paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/ -- usage: log('inside coolFunc', this, arguments);
window.log = function f(){ log.history = log.history || []; log.history.push(arguments); if(this.console) { var args = arguments, newarr; args.callee = args.callee.caller; newarr = [].slice.call(args); if (typeof console.log === 'object') log.apply.call(console.log, console, newarr); else console.log.apply(console, newarr);}};

// make it safe to use console.log always
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
(function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());

// Rich text editor -  Pagedown http://code.google.com/p/pagedown/
// Converter
var Markdown;Markdown="object"===typeof exports&&"function"===typeof require?exports:{};(function(){function q(e){return e}function s(){return!1}function t(){}function u(){}t.prototype={chain:function(e,h){var i=this[e];if(!i)throw Error("unknown hook "+e);this[e]=i===q?h:function(e){return h(i(e))}},set:function(e,h){if(!this[e])throw Error("unknown hook "+e);this[e]=h},addNoop:function(e){this[e]=q},addFalse:function(e){this[e]=s}};Markdown.HookCollection=t;u.prototype={set:function(e,h){this["s_"+e]=h},get:function(e){return this["s_"+e]}};Markdown.Converter=function(){function e(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,c,b,g,e,j){c=c.toLowerCase();k.set(c,A(b));if(e)return g;j&&l.set(c,j.replace(/"/g,"&quot;"));return""})}function h(a){a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,i);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,i);a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,i);a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,i);return a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,i)}function i(a,d){var c;c=d.replace(/^\n+/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+(o.push(c)-1)+"K\n\n"}function v(a,d){a=s(a);a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=B(a);a=G(a);a=H(a);a=h(a);return a=I(a,d)}function p(a){a=J(a);a=q(a);a=a.replace(/\\(\\)/g,w);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,w);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,C);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,C);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,x);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,x);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,x);a=K(a);a=a.replace(/~P/g,"://");a=A(a);a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");return a=a.replace(/  +\n/g," <br>\n")}function q(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(a){var c=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return c=m(c,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function x(a,d,c,b,g,e,j,f){void 0==f&&(f="");a=c.replace(/:\/\//g,"~P");b=b.toLowerCase();if(""==g)if(""==b&&(b=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=k.get(b))g=k.get(b),void 0!=l.get(b)&&(f=l.get(b));else if(-1<d.search(/\(\s*\)$/m))g="";else return d;g=L(g);g=m(g,"*_");d='<a href="'+g+'"';""!=f&&(f=y(f),f=m(f,"*_"),d+=' title="'+f+'"');return d+(">"+a+"</a>")}function y(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function C(a,d,c,b,g,e,j,f){a=c;b=b.toLowerCase();f||(f="");if(""==g)if(""==b&&(b=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=k.get(b))g=k.get(b),void 0!=l.get(b)&&(f=l.get(b));else return d;a=m(y(a),"*_[]()");g=m(g,"*_");d='<img src="'+g+'" alt="'+a+'"';f=y(f);f=m(f,"*_");return d+(' title="'+f+'"')+" />"}function s(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return"<h1>"+p(c)+"</h1>\n\n"});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return"<h2>"+p(c)+"</h2>\n\n"});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,b){a=c.length;return"<h"+a+">"+p(b)+"</h"+a+">\n\n"})}function B(a){var a=a+"~0",d=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;r?a=a.replace(d,function(a,b,d){a=-1<d.search(/[*+-]/g)?"ul":"ol";b=D(b,a);b=b.replace(/\s+$/,"");return"<"+a+">"+b+"</"+a+">\n"}):(d=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(d,function(a,b,d,e){a=-1<e.search(/[*+-]/g)?"ul":"ol";d=D(d,a);return b+"<"+a+">\n"+d+"</"+a+">\n"}));return a=a.replace(/~0/,"")}function D(a,d){r++;var a=a.replace(/\n{2,}$/,"\n"),c=M[d],b=!1,a=(a+"~0").replace(RegExp("(^[ \\t]*)("+c+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+c+")[ \\t]+))","gm"),function(a,d,c,f){a=f;(d=/\n\n$/.test(a))||-1<a.search(/\n{2,}/)||b?a=v(z(a),!0):(a=B(z(a)),a=a.replace(/\n$/,""),a=p(a));b=d;return"<li>"+a+"</li>\n"}),a=a.replace(/~0/g,"");r--;return a}function G(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,c,b){a=E(z(c));a=F(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return"\n\n"+("<pre><code>"+a+"\n</code></pre>")+"\n\n"+b});return a=a.replace(/~0/,"")}function N(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(o.push(a)-1)+"K\n\n"}function J(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,c,b,e){a=e.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=E(a);a=a.replace(/:\/\//g,"~P");return c+"<code>"+a+"</code>"})}function E(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=m(a,"*_{}[]\\",!1)}function H(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,c){var b;b=c.replace(/^[ \t]*>[ \t]?/gm,"~0");b=b.replace(/~0/g,"");b=b.replace(/^[ \t]+$/gm,"");b=v(b);b=b.replace(/(^|\n)/g,"$1  ");b=b.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return N("<blockquote>\n"+b+"\n</blockquote>")})}function I(a,d){for(var a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),c=a.split(/\n{2,}/g),b=[],e=/~K(\d+)K/,h=c.length,j=0;j<h;j++){var f=c[j];e.test(f)?b.push(f):/\S/.test(f)&&(f=p(f),f=f.replace(/^([ \t]*)/g,"<p>"),f+="</p>",b.push(f))}if(!d){h=b.length;for(j=0;j<h;j++)for(var i=!0;i;)i=!1,b[j]=b[j].replace(/~K(\d+)K/g,function(a,b){i=!0;return o[b]})}return b.join("\n\n")}function A(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}function K(a){a=a.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4");return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,function(a,c){return'<a href="'+c+'">'+n.plainLinkText(c)+"</a>"})}function O(a){return a=a.replace(/~E(\d+)E/g,function(a,c){var b=parseInt(c);return String.fromCharCode(b)})}function z(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")}function F(a){if(!/\t/.test(a))return a;var d=["    ","   ","  "," "],c=0,b;return a.replace(/[\n\t]/g,function(a,e){if("\n"===a)return c=e+1,a;b=(e-c)%4;c=e+1;return d[b]})}function L(a){if(!a)return"";var d=a.length;return a.replace(P,function(c,b){return"~D"==c?"%24":":"==c&&(b==d-1||/[0-9\/]/.test(a.charAt(b+1)))?":":"%"+c.charCodeAt(0).toString(16)})}function m(a,d,c){d="(["+d.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);return a=a.replace(RegExp(d,"g"),w)}function w(a,d){return"~E"+d.charCodeAt(0)+"E"}var n=this.hooks=new t;n.addNoop("plainLinkText");n.addNoop("preConversion");n.addNoop("postConversion");var k,l,o,r;this.makeHtml=function(a){if(k)throw Error("Recursive call to converter.makeHtml");k=new u;l=new u;o=[];r=0;a=n.preConversion(a);a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=F("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=h(a);a=e(a);a=v(a);a=O(a);a=a.replace(/~D/g,"$$");a=a.replace(/~T/g,"~");a=n.postConversion(a);o=l=k=null;return a};var M={ol:"\\d+[.]",ul:"[*+-]"},P=/(?:["'*()[\]:]|~D)/g}})();
// Sanititzer
(function(){function l(a){return a.replace(/<[^>]*>?/gi,m)}function m(a){return a.match(n)||a.match(o)||a.match(p)?a:""}function q(a){if(""==a)return"";var d=/<\/?\w+[^>]*(\s|$|>)/g,f=a.toLowerCase().match(d),e=(f||[]).length;if(0==e)return a;for(var h,c,g,i=[],j=[],k=!1,b=0;b<e;b++)if(h=f[b].replace(/<\/?(\w+).*/,"$1"),!(i[b]||-1<"<p><img><br><li><hr>".search("<"+h+">"))){c=f[b];g=-1;if(!/^<\//.test(c))for(c=b+1;c<e;c++)if(!i[c]&&f[c]=="</"+h+">"){g=c;break}-1==g?k=j[b]=!0:i[g]=!0}if(!k)return a;b=0;return a=a.replace(d,function(a){a=j[b]?"":a;b++;return a})}var d,e;"object"===typeof exports&&"function"===typeof require?(d=exports,e=require("./Markdown.Converter").Converter):(d=window.Markdown,e=d.Converter);d.getSanitizingConverter=function(){var a=new e;a.hooks.chain("postConversion",l);a.hooks.chain("postConversion",q);return a};var n=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,o=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,p=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i})();
// Editor
(function(){var u,C,w;function v(){}function E(a){this.buttonBar=e.getElementById("wmd-button-bar"+a);this.preview=e.getElementById("wmd-preview"+a);this.input=e.getElementById("wmd-input"+a)}function F(a,c){var d=this,b=[],f=0,g="none",i,e,n,h=function(a,c){g!=a&&(g=a,c||r());!u||"moving"!=g?e=setTimeout(o,1):n=null},o=function(a){n=new A(c,a);e=void 0};this.setCommandMode=function(){g="command";r();e=setTimeout(o,0)};this.canUndo=function(){return 1<f};this.canRedo=function(){return b[f+1]?!0:!1};this.undo=function(){d.canUndo()&&(i?(i.restore(),i=null):(b[f]=new A(c),b[--f].restore(),a&&a()));g="none";c.input.focus();o()};this.redo=function(){d.canRedo()&&(b[++f].restore(),a&&a());g="none";c.input.focus();o()};var r=function(){var d=n||new A(c);if(!d)return!1;"moving"==g?i||(i=d):(i&&(b[f-1].text!=i.text&&(b[f++]=i),i=null),b[f++]=d,b[f+1]=null,a&&a())},l=function(a){var c=!1;if(a.ctrlKey||a.metaKey)switch(String.fromCharCode(a.charCode||a.keyCode)){case "y":d.redo();c=!0;break;case "z":a.shiftKey?d.redo():d.undo(),c=!0}c&&(a.preventDefault&&a.preventDefault(),window.event&&(window.event.returnValue=!1))},m=function(a){!a.ctrlKey&&!a.metaKey&&(a=a.keyCode,33<=a&&40>=a||63232<=a&&63235>=a?h("moving"):8==a||46==a||127==a?h("deleting"):13==a?h("newlines"):27==a?h("escape"):(16>a||20<a)&&91!=a&&h("typing"))};(function(){k.addEvent(c.input,"keypress",function(a){(a.ctrlKey||a.metaKey)&&(89==a.keyCode||90==a.keyCode)&&a.preventDefault()});var a=function(){if((u||n&&n.text!=c.input.value)&&void 0==e)g="paste",r(),o()};k.addEvent(c.input,"keydown",l);k.addEvent(c.input,"keydown",m);k.addEvent(c.input,"mousedown",function(){h("moving")});c.input.onpaste=a;c.input.ondrop=a})();o(!0);r()}function A(a,c){var d=this,b=a.input;this.init=function(){if(k.isVisible(b)&&(c||!(e.activeElement&&e.activeElement!==b)))if(this.setInputAreaSelectionStartEnd(),this.scrollTop=b.scrollTop,!this.text&&b.selectionStart||0===b.selectionStart)this.text=b.value};this.setInputAreaSelection=function(){if(k.isVisible(b))if(void 0!==b.selectionStart&&!C)b.focus(),b.selectionStart=d.start,b.selectionEnd=d.end,b.scrollTop=d.scrollTop;else if(e.selection&&!(e.activeElement&&e.activeElement!==b)){b.focus();var a=b.createTextRange();a.moveStart("character",-b.value.length);a.moveEnd("character",-b.value.length);a.moveEnd("character",d.end);a.moveStart("character",d.start);a.select()}};this.setInputAreaSelectionStartEnd=function(){if(!a.ieCachedRange&&(b.selectionStart||0===b.selectionStart))d.start=b.selectionStart,d.end=b.selectionEnd;else if(e.selection){d.text=k.fixEolChars(b.value);var c=a.ieCachedRange||e.selection.createRange(),g=k.fixEolChars(c.text),i="\u0007"+g+"\u0007";c.text=i;var j=k.fixEolChars(b.value);c.moveStart("character",-i.length);c.text=g;d.start=j.indexOf("\u0007");d.end=j.lastIndexOf("\u0007")-1;if(i=d.text.length-k.fixEolChars(b.value).length){for(c.moveStart("character",-g.length);i--;)g+="\n",d.end+=1;c.text=g}a.ieCachedRange&&(d.scrollTop=a.ieCachedScrollTop);a.ieCachedRange=null;this.setInputAreaSelection()}};this.restore=function(){void 0!=d.text&&d.text!=b.value&&(b.value=d.text);this.setInputAreaSelection();b.scrollTop=d.scrollTop};this.getChunks=function(){var a=new v;a.before=k.fixEolChars(d.text.substring(0,d.start));a.startTag="";a.selection=k.fixEolChars(d.text.substring(d.start,d.end));a.endTag="";a.after=k.fixEolChars(d.text.substring(d.end));a.scrollTop=d.scrollTop;return a};this.setChunks=function(a){a.before+=a.startTag;a.after=a.endTag+a.after;this.start=a.before.length;this.end=a.before.length+a.selection.length;this.text=a.before+a.selection+a.after;this.scrollTop=a.scrollTop};this.init()}function H(a,c,d){var b,f,g,i=function(){var a=0;window.innerHeight?a=window.pageYOffset:e.documentElement&&e.documentElement.scrollTop?a=e.documentElement.scrollTop:e.body&&(a=e.body.scrollTop);return a},j=function(){if(c.preview){var b=c.input.value;if(!(b&&b==g)){g=b;var d=(new Date).getTime(),b=a.makeHtml(b);f=(new Date).getTime()-d;G(b)}}},n=function(){b&&(clearTimeout(b),b=void 0);var a=0,a=f;3E3<a&&(a=3E3);b=setTimeout(j,a)};this.refresh=function(a){a?(g="",j()):n()};this.processingTime=function(){return f};var h=!0,o=function(a){var b=c.preview,d=b.parentNode,f=b.nextSibling;d.removeChild(b);b.innerHTML=a;f?d.insertBefore(b,f):d.appendChild(b)},r=function(a){c.preview.innerHTML=a},l,m=function(a){if(l)return l(a);try{r(a),l=r}catch(c){l=o,l(a)}},G=function(a){var b=q.getTop(c.input)-i();c.preview&&(m(a),d());c.preview&&(c.preview.scrollTop=(c.preview.scrollHeight-c.preview.clientHeight)*(c.preview.scrollHeight<=c.preview.clientHeight?1:c.preview.scrollTop/(c.preview.scrollHeight-c.preview.clientHeight)));if(h)h=!1;else{var f=q.getTop(c.input)-i();u?setTimeout(function(){window.scrollBy(0,f-b)},0):window.scrollBy(0,f-b)}};(function(a,c){k.addEvent(a,"input",c);a.onpaste=c;a.ondrop=c;k.addEvent(a,"keypress",c);k.addEvent(a,"keydown",c)})(c.input,n);j();c.preview&&(c.preview.scrollTop=0)}function I(a,c,d,b,f,g){var i,j,n,h,o,r,l,m,q,t,v,D;function p(a){x.focus();if(a.textOp){d&&d.setCommandMode();var f=new A(c);if(!f)return;var h=f.getChunks(),g=function(){x.focus();h&&f.setChunks(h);f.restore();b.refresh()};a.textOp(h,g)||g()}a.execute&&a.execute(d)}function B(a,b){var d=a.getElementsByTagName("span")[0];if(b){if(d.style.backgroundPosition=a.XShift+" 0px",a.onmouseover=function(){d.style.backgroundPosition=this.XShift+" -40px"},a.onmouseout=function(){d.style.backgroundPosition=this.XShift+" 0px"},u&&(a.onmousedown=function(){e.activeElement&&e.activeElement!==c.input||(c.ieCachedRange=document.selection.createRange(),c.ieCachedScrollTop=c.input.scrollTop)}),!a.isHelp)a.onclick=function(){if(this.onmouseout)this.onmouseout();p(this);return false}}else d.style.backgroundPosition=a.XShift+" -20px",a.onmouseover=a.onmouseout=a.onclick=function(){}}function s(a){"string"===typeof a&&(a=f[a]);return function(){a.apply(f,arguments)}}function w(){d&&(B(i,d.canUndo()),B(j,d.canRedo()))}var x=c.input;D=v=t=q=m=l=r=o=h=n=j=i=void 0;(function(){var b=c.buttonBar,d=document.createElement("ul");d.id="wmd-button-row"+a;d.className="wmd-button-row";var d=b.appendChild(d),f=0,b=function(b,c,h,g){var e=document.createElement("li");e.className="wmd-button";e.style.left=f+"px";f+=25;var i=document.createElement("span");e.id=b+a;e.appendChild(i);e.title=c;e.XShift=h;g&&(e.textOp=g);B(e,!0);d.appendChild(e);return e},e=function(b){var c=document.createElement("li");c.className="wmd-spacer wmd-spacer"+b;c.id="wmd-spacer"+b+a;d.appendChild(c);f+=25};n=b("wmd-bold-button","Strong <strong> Ctrl+B","0px",s("doBold"));h=b("wmd-italic-button","Emphasis <em> Ctrl+I","-20px",s("doItalic"));e(1);o=b("wmd-link-button","Hyperlink <a> Ctrl+L","-40px",s(function(a,b){return this.doLinkOrImage(a,b,!1)}));r=b("wmd-quote-button","Blockquote <blockquote> Ctrl+Q","-60px",s("doBlockquote"));l=b("wmd-code-button","Code Sample <pre><code> Ctrl+K","-80px",s("doCode"));m=b("wmd-image-button","Image <img> Ctrl+G","-100px",s(function(a,b){return this.doLinkOrImage(a,b,!0)}));e(2);q=b("wmd-olist-button","Numbered List <ol> Ctrl+O","-120px",s(function(a,b){this.doList(a,b,!0)}));t=b("wmd-ulist-button","Bulleted List <ul> Ctrl+U","-140px",s(function(a,b){this.doList(a,b,!1)}));v=b("wmd-heading-button","Heading <h1>/<h2> Ctrl+H","-160px",s("doHeading"));D=b("wmd-hr-button","Horizontal Rule <hr> Ctrl+R","-180px",s("doHorizontalRule"));e(3);i=b("wmd-undo-button","Undo - Ctrl+Z","-200px",null);i.execute=function(a){a&&a.undo()};e=/win/.test(y.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z";j=b("wmd-redo-button",e,"-220px",null);j.execute=function(a){a&&a.redo()};g&&(b=document.createElement("li"),e=document.createElement("span"),b.appendChild(e),b.className="wmd-button wmd-help-button",b.id="wmd-help-button"+a,b.XShift="-240px",b.isHelp=!0,b.style.right="0px",b.title=g.title||J,b.onclick=g.handler,B(b,!0),d.appendChild(b));w()})();var z="keydown";C&&(z="keypress");k.addEvent(x,z,function(a){if((a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey){switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "b":p(n);break;case "i":p(h);break;case "l":p(o);break;case "q":p(r);break;case "k":p(l);break;case "g":p(m);break;case "o":p(q);break;case "u":p(t);break;case "h":p(v);break;case "r":p(D);break;case "y":p(j);break;case "z":a.shiftKey?p(j):p(i);break;default:return}a.preventDefault&&a.preventDefault();window.event&&(window.event.returnValue=!1)}});k.addEvent(x,"keyup",function(a){if(a.shiftKey&&(!a.ctrlKey&&!a.metaKey)&&13===(a.charCode||a.keyCode))a={},a.textOp=s("doAutoindent"),p(a)});u&&k.addEvent(x,"keydown",function(a){if(27===a.keyCode)return!1});this.setUndoRedoButtonStates=w}function z(a){this.hooks=a}function K(a){return a.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(a,d,b){d=d.replace(/\?.*$/,function(a){return a.replace(/\+/g," ")});d=decodeURIComponent(d);d=encodeURI(d).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29");d=d.replace(/\?.*$/,function(a){return a.replace(/\+/g,"%2b")});b&&(b=b.trim?b.trim():b.replace(/^\s*/,"").replace(/\s*$/,""),b=$.trim(b).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));return b?d+' "'+b+'"':d})}var k={},q={},t={},e=window.document,l=window.RegExp,y=window.navigator;u=/msie/.test(y.userAgent.toLowerCase());w=/msie 6/.test(y.userAgent.toLowerCase())||/msie 5/.test(y.userAgent.toLowerCase());C=/opera/.test(y.userAgent.toLowerCase());var J="Markdown Editing Help";Markdown.Editor=function(a,c,d){var c=c||"",b=this.hooks=new Markdown.HookCollection;b.addNoop("onPreviewRefresh");b.addNoop("postBlockquoteCreation");b.addFalse("insertImageDialog");this.getConverter=function(){return a};var f=this,g;this.run=function(){if(!g){g=new E(c);var i=new z(b),j=new H(a,g,function(){b.onPreviewRefresh()}),n,h;/\?noundo/.test(e.location.href)||(n=new F(function(){j.refresh();h&&h.setUndoRedoButtonStates()},g),this.textOperation=function(a){n.setCommandMode();a();f.refreshPreview()});h=new I(c,g,n,j,i,d);h.setUndoRedoButtonStates();(f.refreshPreview=function(){j.refresh(true)})()}}};v.prototype.findTags=function(a,c){var d=this,b;a&&(b=k.extendRegExp(a,"","$"),this.before=this.before.replace(b,function(a){d.startTag+=a;return""}),b=k.extendRegExp(a,"^",""),this.selection=this.selection.replace(b,function(a){d.startTag+=a;return""}));c&&(b=k.extendRegExp(c,"","$"),this.selection=this.selection.replace(b,function(a){d.endTag=a+d.endTag;return""}),b=k.extendRegExp(c,"^",""),this.after=this.after.replace(b,function(a){d.endTag=a+d.endTag;return""}))};v.prototype.trimWhitespace=function(a){var c,d=this;a?a=c="":(a=function(a){d.before+=a;return""},c=function(a){d.after=a+d.after;return""});this.selection=this.selection.replace(/^(\s*)/,a).replace(/(\s*)$/,c)};v.prototype.skipLines=function(a,c,d){void 0===a&&(a=1);void 0===c&&(c=1);a++;c++;var b,f;navigator.userAgent.match(/Chrome/)&&"X".match(/()./);this.selection=this.selection.replace(/(^\n*)/,"");this.startTag+=l.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag+=l.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before+=l.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after+=l.$1;if(this.before){for(b=f="";a--;)b+="\\n?",f+="\n";d&&(b="\\n*");this.before=this.before.replace(new l(b+"$",""),f)}if(this.after){for(b=f="";c--;)b+="\\n?",f+="\n";d&&(b="\\n*");this.after=this.after.replace(new l(b,""),f)}};k.isVisible=function(a){if(window.getComputedStyle)return"none"!==window.getComputedStyle(a,null).getPropertyValue("display");if(a.currentStyle)return"none"!==a.currentStyle.display};k.addEvent=function(a,c,d){a.attachEvent?a.attachEvent("on"+c,d):a.addEventListener(c,d,!1)};k.removeEvent=function(a,c,d){a.detachEvent?a.detachEvent("on"+c,d):a.removeEventListener(c,d,!1)};k.fixEolChars=function(a){a=a.replace(/\r\n/g,"\n");return a=a.replace(/\r/g,"\n")};k.extendRegExp=function(a,c,d){if(null===c||void 0===c)c="";if(null===d||void 0===d)d="";var a=a.toString(),b,a=a.replace(/\/([gim]*)$/,function(a,c){b=c;return""}),a=a.replace(/(^\/|\/$)/g,"");return new l(c+a+d,b)};q.getTop=function(a,c){var d=a.offsetTop;if(!c)for(;a=a.offsetParent;)d+=a.offsetTop;return d};q.getHeight=function(a){return a.offsetHeight||a.scrollHeight};q.getWidth=function(a){return a.offsetWidth||a.scrollWidth};q.getPageSize=function(){var a,c,d,b;self.innerHeight&&self.scrollMaxY?(a=e.body.scrollWidth,c=self.innerHeight+self.scrollMaxY):e.body.scrollHeight>e.body.offsetHeight?(a=e.body.scrollWidth,c=e.body.scrollHeight):(a=e.body.offsetWidth,c=e.body.offsetHeight);self.innerHeight?(d=self.innerWidth,b=self.innerHeight):e.documentElement&&e.documentElement.clientHeight?(d=e.documentElement.clientWidth,b=e.documentElement.clientHeight):e.body&&(d=e.body.clientWidth,b=e.body.clientHeight);a=Math.max(a,d);c=Math.max(c,b);return[a,c,d,b]};t.createBackground=function(){var a=e.createElement("div"),c=a.style;a.className="wmd-prompt-background";c.position="absolute";c.top="0";c.zIndex="1000";u?c.filter="alpha(opacity=50)":c.opacity="0.5";var d=q.getPageSize();c.height=d[1]+"px";u?(c.left=e.documentElement.scrollLeft,c.width=e.documentElement.clientWidth):(c.left="0",c.width="100%");e.body.appendChild(a);return a};t.prompt=function(a,c,d){var b,f;void 0===c&&(c="");var g=function(a){27===(a.charCode||a.keyCode)&&i(!0)},i=function(a){k.removeEvent(e.body,"keydown",g);var c=f.value;a?c=null:(c=c.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(c)||(c="http://"+c));b.parentNode.removeChild(b);d(c);return!1},j=function(){b=e.createElement("div");b.className="wmd-prompt-dialog";b.style.padding="10px;";b.style.position="fixed";b.style.width="400px";b.style.zIndex="1001";var d=e.createElement("div");d.innerHTML=a;d.style.padding="5px";b.appendChild(d);var d=e.createElement("form"),h=d.style;d.onsubmit=function(){return i(!1)};h.padding="0";h.margin="0";h.cssFloat="left";h.width="100%";h.textAlign="center";h.position="relative";b.appendChild(d);f=e.createElement("input");f.type="text";f.value=c;h=f.style;h.display="block";h.width="80%";h.marginLeft=h.marginRight="auto";d.appendChild(f);var o=e.createElement("input");o.type="button";o.onclick=function(){return i(!1)};o.value="OK";h=o.style;h.margin="10px";h.display="inline";h.width="7em";var j=e.createElement("input");j.type="button";j.onclick=function(){return i(!0)};j.value="Cancel";h=j.style;h.margin="10px";h.display="inline";h.width="7em";d.appendChild(o);d.appendChild(j);k.addEvent(e.body,"keydown",g);b.style.top="50%";b.style.left="50%";b.style.display="block";w&&(b.style.position="absolute",b.style.top=e.documentElement.scrollTop+200+"px",b.style.left="50%");e.body.appendChild(b);b.style.marginTop=-(q.getHeight(b)/2)+"px";b.style.marginLeft=-(q.getWidth(b)/2)+"px"};setTimeout(function(){j();var a=c.length;if(void 0!==f.selectionStart)f.selectionStart=0,f.selectionEnd=a;else if(f.createTextRange){var b=f.createTextRange();b.collapse(!1);b.moveStart("character",-a);b.moveEnd("character",a);b.select()}f.focus()},0)};var m=z.prototype;m.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";m.unwrap=function(a){var c=new l("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");a.selection=a.selection.replace(c,"$1 $2")};m.wrap=function(a,c){this.unwrap(a);var d=new l("(.{1,"+c+"})( +|$\\n?)","gm"),b=this;a.selection=a.selection.replace(d,function(a,c){return(new l("^"+b.prefixes,"")).test(a)?a:c+"\n"});a.selection=a.selection.replace(/\s+$/,"")};m.doBold=function(a,c){return this.doBorI(a,c,2,"strong text")};m.doItalic=function(a,c){return this.doBorI(a,c,1,"emphasized text")};m.doBorI=function(a,c,d,b){a.trimWhitespace();a.selection=a.selection.replace(/\n{2,}/g,"\n");var f=/(\**$)/.exec(a.before)[0],c=/(^\**)/.exec(a.after)[0],f=Math.min(f.length,c.length);f>=d&&(2!=f||1!=d)?(a.before=a.before.replace(l("[*]{"+d+"}$",""),""),a.after=a.after.replace(l("^[*]{"+d+"}",""),"")):!a.selection&&c?(a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,""),a.before=a.before+c+l.$1):(!a.selection&&!c&&(a.selection=b),d=1>=d?"*":"**",a.before+=d,a.after=d+a.after)};m.stripLinkDefs=function(a,c){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,b,f,e,i){c[b]=a.replace(/\s*$/,"");return e?(c[b]=a.replace(/["(](.+?)[")]$/,""),e+i):""})};m.addLinkDef=function(a,c){var d=0,b={};a.before=this.stripLinkDefs(a.before,b);a.selection=this.stripLinkDefs(a.selection,b);a.after=this.stripLinkDefs(a.after,b);var f="",e=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,i=function(a){d++;a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+d+"]:");f+="\n"+a},j=function(a,c,f,k,l,n){f=f.replace(e,j);return b[l]?(i(b[l]),c+f+k+d+n):a};a.before=a.before.replace(e,j);c?i(c):a.selection=a.selection.replace(e,j);var k=d;a.after=a.after.replace(e,j);a.after&&(a.after=a.after.replace(/\n*$/,""));a.after||(a.selection=a.selection.replace(/\n*$/,""));a.after+="\n\n"+f;return k};m.doLinkOrImage=function(a,c,d){a.trimWhitespace();a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var b;if(1<a.endTag.length&&0<a.startTag.length)a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null);else if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))this.addLinkDef(a,null);else{var f=this,e=function(e){b.parentNode.removeChild(b);null!==e&&(a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),e=" [999]: "+K(e),e=f.addLinkDef(a,e),a.startTag=d?"![":"[",a.endTag="]["+e+"]",a.selection||(a.selection=d?"enter image description here":"enter link description here"));c()};b=t.createBackground();d?this.hooks.insertImageDialog(e)||t.prompt("<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>","http://",e):t.prompt('<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',"http://",e);return!0}};m.doAutoindent=function(a){var c=!1;a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");!a.selection&&!/^[ \t]*(?:\n|$)/.test(a.after)&&(a.after=a.after.replace(/^[^\n]*/,function(c){a.selection=c;return""}),c=!0);/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(a.before)&&this.doList&&this.doList(a);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&this.doBlockquote&&this.doBlockquote(a);/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&this.doCode&&this.doCode(a);c&&(a.after=a.selection+a.after,a.selection="")};m.doBlockquote=function(a){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(b,c,d,e){a.before+=c;a.after=e+a.after;return d});a.before=a.before.replace(/(>[ \t]*)$/,function(b,c){a.selection=c+a.selection;return""});a.selection=a.selection.replace(/^(\s|>)+$/,"");a.selection=a.selection||"Blockquote";var c="",d="",b;if(a.before){for(var e=a.before.replace(/\n$/,"").split("\n"),g=!1,i=0;i<e.length;i++){var j=!1;b=e[i];g=g&&0<b.length;/^>/.test(b)?(j=!0,!g&&1<b.length&&(g=!0)):j=/^[ \t]*$/.test(b)?!0:g;j?c+=b+"\n":(d+=c+b,c="\n")}/(^|\n)>/.test(c)||(d+=c,c="")}a.startTag=c;a.before=d;a.after&&(a.after=a.after.replace(/^\n?/,"\n"));a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(b){a.endTag=b;return""});c=function(b){var c=b?"> ":"";if(a.startTag)a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"});if(a.endTag)a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"})};if(/^(?![ ]{0,3}>)/m.test(a.selection))this.wrap(a,70),a.selection=a.selection.replace(/^/gm,"> "),c(!0),a.skipLines();else if(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(a),c(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag)a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n");a.selection=this.hooks.postBlockquoteCreation(a.selection);/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,c){a.startTag=a.startTag+c;return""}))};m.doCode=function(a){var c=/\S[ ]*$/.test(a.before);if(!/^[ ]*\S/.test(a.after)&&!c||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(b){a.selection=b+a.selection;return""});var d=c=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&(c=0);/^\n(\t|[ ]{4,})/.test(a.after)&&(d=0);a.skipLines(c,d);a.selection?/^[ ]{0,3}\S/m.test(a.selection)?/\n/.test(a.selection)?a.selection=a.selection.replace(/^/gm,"    "):a.before+="    ":a.selection=a.selection.replace(/^[ ]{4}/gm,""):(a.startTag="    ",a.selection="enter code here")}else a.trimWhitespace(),a.findTags(/`/,/`/),!a.startTag&&!a.endTag?(a.startTag=a.endTag="`",a.selection||(a.selection="enter code here")):a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag=""};m.doList=function(a,c,d){var c=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,b="-",e=1,g=function(){var a;d?(a=" "+e+". ",e++):a=" "+b+" ";return a},i=function(a){void 0===d&&(d=/^\s*\d/.test(a));return a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return g()})};a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);a.before&&(!/\n$/.test(a.before)&&!/^\n/.test(a.startTag))&&(a.before+=a.startTag,a.startTag="");if(a.startTag){var j=/\d+[.]/.test(a.startTag);a.startTag="";a.selection=a.selection.replace(/\n[ ]{4}/g,"\n");this.unwrap(a);a.skipLines();j&&(a.after=a.after.replace(c,i));if(d==j)return}var k=1;a.before=a.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(a){if(/^\s*([*+-])/.test(a))b=l.$1;k=/[^\n]\n\n[^\n]/.test(a)?1:0;return i(a)});a.selection||(a.selection="List item");var j=g(),h=1;a.after=a.after.replace(c,function(a){h=/[^\n]\n\n[^\n]/.test(a)?1:0;return i(a)});a.trimWhitespace(!0);a.skipLines(k,h,!0);a.startTag=j;c=j.replace(/./g," ");this.wrap(a,72-c.length);a.selection=a.selection.replace(/\n/g,"\n"+c)};m.doHeading=function(a){a.selection=a.selection.replace(/\s+/g," ");a.selection=a.selection.replace(/(^\s+|\s+$)/g,"");if(a.selection){var c=0;a.findTags(/#+[ ]*/,/[ ]*#+/);/#+/.test(a.startTag)&&(c=l.lastMatch.length);a.startTag=a.endTag="";a.findTags(null,/\s?(-+|=+)/);/=+/.test(a.endTag)&&(c=1);/-+/.test(a.endTag)&&(c=2);a.startTag=a.endTag="";a.skipLines(1,1);c=0==c?2:c-1;if(0<c){var c=2<=c?"-":"=",d=a.selection.length;72<d&&(d=72);for(a.endTag="\n";d--;)a.endTag+=c}}else a.startTag="## ",a.selection="Heading",a.endTag=" ##"};m.doHorizontalRule=function(a){a.startTag="----------\n";a.selection="";a.skipLines(2,1,!0)}})();

// Pjax v 6 June 2012 https://github.com/defunkt/jquery-pjax - minimized following site instructions
(function(c){function k(a,b,e){e=n(b,e);b=a.currentTarget;if("A"!==b.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(1<a.which||a.metaKey||a.ctrlKey))if(!(location.protocol!==b.protocol||location.host!==b.host)&&!(b.hash&&b.href.replace(b.hash,"")===location.href.replace(location.hash,"")))b={url:b.href,container:c(b).attr("data-pjax"),target:b,clickedElement:c(b),fragment:null},c.pjax(c.extend({},b,e)),a.preventDefault()}function o(a){var b=document.createElement("a");b.href=a;return b}function n(a,b){a&&b?b.container=a:b=c.isPlainObject(a)?a:{container:a};b.container&&(b.container=p(b.container));return b}function p(a){a=c(a);if(a.length){if(""!==a.selector&&a.context===document)return a;if(a.attr("id"))return c("#"+a.attr("id"));throw"cant get selector for pjax container!";}throw"no pjax container for "+a.selector;}function q(a,b){var e=c();a.each(function(){c(this).is(b)&&(e=e.add(this));e=e.add(b,this)});return e}function r(a,b,e){var d={},b=(b.getResponseHeader("X-PJAX-URL")||e.requestUrl).replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"");d.url=b;b=c(a);if(0===b.length)return d;d.title=q(b,"title").last().text();e.fragment?(a=q(b,e.fragment).first(),a.length&&(d.contents=a.contents(),d.title||(d.title=a.attr("title")||a.data("title")))):/<html/i.test(a)||(d.contents=b);d.contents&&(d.contents=d.contents.not("title"),d.contents.find("title").remove());d.title&&(d.title=c.trim(d.title));return d}function h(){this.mapping={};this.forwardStack=[];this.backStack=[]}c.fn.pjax=function(a,b){return this.live("click.pjax",function(c){k(c,a,b)})};var f=c.pjax=function(a){function b(a,b){var d=c.Event(a,{relatedTarget:e});j.trigger(d,b);return!d.isDefaultPrevented()}a=c.extend(!0,{},c.ajaxSettings,f.defaults,a);c.isFunction(a.url)&&(a.url=a.url());var e=a.target;!e&&a.clickedElement&&(e=a.clickedElement[0]);var d=o(a.url).hash,h=a.beforeSend,s=a.complete,t=a.success,k=a.error,j=a.context=p(a.container);a.data||(a.data={});a.data._pjax=j.selector;var l;a.beforeSend=function(c,d){if(d.timeout>0){l=setTimeout(function(){b("pjax:timeout",[c,a])&&c.abort("timeout")},d.timeout);d.timeout=0}c.setRequestHeader("X-PJAX","true");c.setRequestHeader("X-PJAX-Container",j.selector);var e;if(h){e=h.apply(this,arguments);if(e===false)return false}if(!b("pjax:beforeSend",[c,d]))return false;a.requestUrl=o(d.url).href};a.complete=function(c,d){l&&clearTimeout(l);s&&s.apply(this,arguments);b("pjax:complete",[c,d,a]);b("pjax:end",[c,a]);b("end.pjax",[c,a])};a.error=function(c,d,e){var f=r("",c,a);k&&k.apply(this,arguments);var g=b("pjax:error",[c,d,e,a]);if(d!=="abort"&&g)window.location=f.url};a.success=function(e,g,h){var i=r(e,h,a);if(i.contents){f.state={id:a.id||(new Date).getTime(),url:i.url,title:i.title,container:j.selector,fragment:a.fragment,timeout:a.timeout};(a.push||a.replace)&&window.history.replaceState(f.state,i.title,i.url);if(i.title)document.title=i.title;j.html(i.contents);typeof a.scrollTo==="number"&&c(window).scrollTop(a.scrollTo);(a.replace||a.push)&&window._gaq&&_gaq.push(["_trackPageview"]);if(d!=="")window.location.href=d;t&&t.apply(this,arguments);b("pjax:success",[e,g,h,a])}else window.location=i.url};f.state||(f.state={id:(new Date).getTime(),url:window.location.href,title:document.title,container:j.selector,fragment:a.fragment,timeout:a.timeout},window.history.replaceState(f.state,document.title));var g=f.xhr;g&&4>g.readyState&&(g.onreadystatechange=c.noop,g.abort());f.options=a;g=f.xhr=c.ajax(a);0<g.readyState&&(c(document).trigger("pjax",[g,a]),a.push&&!a.replace&&(m.push(f.state.id,j.clone(!0,!0).contents()),window.history.pushState(null,"",a.url)),b("pjax:start",[g,a]),b("start.pjax",[g,a]),b("pjax:send",[g,a]));return f.xhr};f.reload=function(a,b){return c.pjax(c.extend({url:window.location.href,push:!1,replace:!0,scrollTo:!1},n(a,b)))};f.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20};h.prototype.push=function(a,b){this.mapping[a]=b;for(this.backStack.push(a);this.forwardStack.length;)delete this.mapping[this.forwardStack.shift()];for(;this.backStack.length>f.defaults.maxCacheLength;)delete this.mapping[this.backStack.shift()]};h.prototype.get=function(a){return this.mapping[a]};h.prototype.forward=function(a,b){this.mapping[a]=b;this.backStack.push(a);(a=this.forwardStack.pop())&&delete this.mapping[a]};h.prototype.back=function(a,b){this.mapping[a]=b;this.forwardStack.push(a);(a=this.backStack.pop())&&delete this.mapping[a]};var m=new h;f.click=k;var u="state"in window.history,v=location.href;c(window).bind("popstate",function(a){var b=!u&&location.href==v;u=!0;if(!b&&(a=a.state)&&a.container)if(b=c(a.container),b.length){var e=m.get(a.id);if(f.state){var d=f.state.id<a.id?"forward":"back";m[d](f.state.id,b.clone(!0,!0).contents())}d=c.Event("pjax:popstate",{state:a,direction:d});b.trigger(d);d={id:a.id,url:a.url,container:b,push:!1,fragment:a.fragment,timeout:a.timeout,scrollTo:!1};e?(c(document).trigger("pjax",[null,d]),b.trigger("pjax:start",[null,d]),b.trigger("start.pjax",[null,d]),a.title&&(document.title=a.title),b.html(e),f.state=a,b.trigger("pjax:end",[null,d]),b.trigger("end.pjax",[null,d])):c.pjax(d);b[0].offsetHeight}else window.location=location.href});0>c.inArray("state",c.event.props)&&c.event.props.push("state");c.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/);c.support.pjax||(c.pjax=function(a){var b=c.isFunction(a.url)?a.url():a.url,e=a.type?a.type.toUpperCase():"GET",d=c("<form>",{method:"GET"===e?"GET":"POST",action:b,style:"display:none"});"GET"!==e&&"POST"!==e&&d.append(c("<input>",{type:"hidden",name:"_method",value:e.toLowerCase()}));a=a.data;if("string"===typeof a)c.each(a.split("&"),function(a,b){var e=b.split("=");d.append(c("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if("object"===typeof a)for(key in a)d.append(c("<input>",{type:"hidden",name:key,value:a[key]}));c(document.body).append(d);d.submit()},c.pjax.click=c.noop,c.pjax.reload=window.location.reload,c.fn.pjax=function(){return this})})(jQuery);

//Tweet v 6 June 2012 https://github.com/seaofclouds/tweet
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){c.fn.tweet=function(m){function g(a,e){if("string"===typeof a){var c=a,h;for(h in e)var f=e[h],c=c.replace(RegExp("{"+h+"}","g"),null===f?"":f);return c}return a(e)}function j(a,e){return function(){var i=[];this.each(function(){i.push(this.replace(a,e))});return c(i)}}function n(a,e){return a.replace(k,function(a){for(var d=/^[a-z]+:/i.test(a)?a:"http://"+a,c=0;c<e.length;++c){var b=e[c];if(b.url==d&&b.expanded_url){d=b.expanded_url;a=b.display_url;break}}return'<a href="'+d.replace(/</g,"&lt;").replace(/>/g,"^&gt;")+'">'+a.replace(/</g,"&lt;").replace(/>/g,"^&gt;")+"</a>"})}function o(){var d="https:"==document.location.protocol?"https:":"http:",e=null===a.fetch?a.count:a.fetch;if(a.list)return d+"//"+a.twitter_api_url+"/1/"+a.username[0]+"/lists/"+a.list+"/statuses.json?page="+a.page+"&per_page="+e+"&include_entities=1&callback=?";if(a.favorites)return d+"//"+a.twitter_api_url+"/favorites/"+a.username[0]+".json?page="+a.page+"&count="+e+"&include_entities=1&callback=?";if(null===a.query&&1==a.username.length)return d+"//"+a.twitter_api_url+"/1/statuses/user_timeline.json?screen_name="+a.username[0]+"&count="+e+(a.retweets?"&include_rts=1":"")+"&page="+a.page+"&include_entities=1&callback=?";var c=a.query||"from:"+a.username.join(" OR from:");return d+"//"+a.twitter_search_url+"/search.json?&q="+encodeURIComponent(c)+"&rpp="+e+"&page="+a.page+"&include_entities=1&callback=?"}function l(a,c){return c?"user"in a?a.user.profile_image_url_https:l(a,!1).replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//,"https://s3.amazonaws.com/twitter_production/"):a.profile_image_url||a.user.profile_image_url}function p(d){var e,i,h,f,b={};b.item=d;b.source=d.source;b.screen_name=d.from_user||d.user.screen_name;b.name=d.from_user_name||d.user.name;b.avatar_size=a.avatar_size;b.avatar_url=l(d,"https:"===document.location.protocol);b.retweet="undefined"!=typeof d.retweeted_status;b.tweet_time=Date.parse(d.created_at.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"));b.join_text="auto"==a.join_text?d.text.match(/^(@([A-Za-z0-9-_]+)) .*/i)?a.auto_join_text_reply:d.text.match(k)?a.auto_join_text_url:d.text.match(/^((\w+ed)|just) .*/im)?a.auto_join_text_ed:d.text.match(/^(\w*ing) .*/i)?a.auto_join_text_ing:a.auto_join_text_default:a.join_text;b.tweet_id=d.id_str;b.twitter_base="http://"+a.twitter_url+"/";b.user_url=b.twitter_base+b.screen_name;b.tweet_url=b.user_url+"/status/"+b.tweet_id;b.reply_url=b.twitter_base+"intent/tweet?in_reply_to="+b.tweet_id;b.retweet_url=b.twitter_base+"intent/retweet?tweet_id="+b.tweet_id;b.favorite_url=b.twitter_base+"intent/favorite?tweet_id="+b.tweet_id;b.retweeted_screen_name=b.retweet&&d.retweeted_status.user.screen_name;e=b.tweet_time;e=((new Date).getTime()-e)/1E3;f=parseInt(e,10);1>f&&(f=0);e=parseInt(f/86400,10);i=parseInt(f/3600,10);h=parseInt(f/60,10);f=parseInt(f,10);b.tweet_relative_time=2<e?"about "+e+" days ago":24<i?"about a day ago":2<i?"about "+i+" hours ago":45<h?"about an hour ago":2<h?"about "+h+" minutes ago":1<f?"about "+f+" seconds ago":"just now";b.entities=d.entities?(d.entities.urls||[]).concat(d.entities.media||[]):[];b.tweet_raw_text=b.retweet?"RT @"+b.retweeted_screen_name+" "+d.retweeted_status.text:d.text;b.tweet_text=c([n(b.tweet_raw_text,b.entities)]).linkUser().linkHash()[0];b.tweet_text_fancy=c([b.tweet_text]).makeHeart()[0];b.user=g('<a class="tweet_user" href="{user_url}">{screen_name}</a>',b);b.join=a.join_text?g(' <span class="tweet_join">{join_text}</span> ',b):" ";b.avatar=b.avatar_size?g('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>',b):"";b.time=g('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}</a></span>',b);b.text=g('<span class="tweet_text">{tweet_text_fancy}</span>',b);b.reply_action=g('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>',b);b.retweet_action=g('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>',b);b.favorite_action=g('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>',b);return b}function q(d){var e='<p class="tweet_intro">'+a.intro_text+"</p>",i='<p class="tweet_outro">'+a.outro_text+"</p>",h=c('<p class="loading">'+a.loading_text+"</p>");a.loading_text&&c(d).not(":has(.tweet_list)").empty().append(h);c.getJSON(o(),function(f){var b=c('<ul class="tweet_list">'),f=c.map(f.results||f,p),f=c.grep(f,a.filter).sort(a.comparator).slice(0,a.count);b.append(c.map(f,function(b){return"<li>"+g(a.template,b)+"</li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd");c(d).empty().append(b);a.intro_text&&b.before(e);a.outro_text&&b.after(i);c(d).trigger("loaded").trigger(0===f.length?"empty":"full");a.refresh_interval&&window.setTimeout(function(){c(d).trigger("tweet:load")},1E3*a.refresh_interval)})}var a=c.extend({username:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"I said,",auto_join_text_ed:"I",auto_join_text_ing:"I am",auto_join_text_reply:"I replied to",auto_join_text_url:"I was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:"{avatar}{time}{join}{text}",comparator:function(a,c){return c.tweet_time-a.tweet_time},filter:function(){return!0}},m),k=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi;c.extend({tweet:{t:g}});c.fn.extend({linkUser:j(/(^|[\W])@(\w+)/gi,'$1<span class="at">@</span><a href="http://'+a.twitter_url+'/$2">$2</a>'),linkHash:j(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="http://'+a.twitter_search_url+"/search?q=&tag=$1&lang=all"+(a.username&&1==a.username.length&&!a.list?"&from="+a.username.join("%2BOR%2B"):"")+'" class="tweet_hashtag">#$1</a>'),makeHeart:j(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>")});return this.each(function(d,e){a.username&&"string"==typeof a.username&&(a.username=[a.username]);c(e).unbind("tweet:load").bind("tweet:load",function(){q(e)}).trigger("tweet:load")})}});
